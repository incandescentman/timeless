#+TITLE: Timeless
#+STARTUP: overview

* Introduction
Welcome to *Timeless*, an infinitely scrolling calendar designed to help you visualize time continuously as you plan your life.

Here it is in action:
[[https://timeless-calendar.vercel.app/][Timeless: The Infinitely Scrolling Calendar ğŸ¡ğŸ•°ï¸]]

#+ATTR_HTML: :width 300px
[[file:docs/assets/_img/unreliablenarrator_infinite_future._macos_application_icon_dc535484-c32d-4ba0-a99f-b920d9e44f2b.png]]

** Summary:
- A web-based, infinitely scrolling calendar built with React and TypeScript that lets you add notes to any day. Desktop and mobile views use virtualization for smooth performance across thousands of days. ğŸ”„ğŸ“–
- Data persists immediately to ~localStorage~ and syncs in the background to your Dropbox account via ~timeline.md~, ensuring privacy and cross-device access. ğŸ”ğŸ“
- To add a note, just click a day and start typing. Pressing Enter saves it; deleting the text removes it. âœï¸ğŸš€
- The current date is always highlighted, and the calendar auto-scrolls to today upon loading. A calendar button lets you return to today instantly. ğŸ“ğŸ¯
- Month names and years appear in the blank space after each month, making navigation intuitive even when scrolling far ahead or back. ğŸ—“ï¸ğŸ”
- Export your calendar as a Markdown diary (~Cmd/Ctrl+E~) or JSON backup. Import from JSON to restore or migrate data. ğŸ’¾ğŸ“‚
- Background sync with Dropbox compares timestamps and preserves the newest changes, keeping your timeline consistent across devices.
   + Health checks available via ~npm run health~ to verify sync integrity. ğŸ”„ğŸŒ

This project is an appreciative fork of [[https://madebyevan.com/calendar/][Continuous Calendar]] by Evan Wallace, with additional functionality I've added.

* Why
** The Problem: Conceptualizing the future one month at a time
Traditional digital calendars like MacOS Calendar and Google Calendar segment time into discrete months: You conceptualize the future one month at a time. ğŸ—ï¸ğŸ§©

[[file:docs/assets/_img/typical-interface.png]]

You're shown a single month's worth of dates. Then, to navigate through time, you click the ~ï¼~ or ~Next~ button... at which point the current month is replaced by a view of the next month. ğŸ”„ğŸ“–

[[file:docs/assets/_img/nextmonth.png]]

Having different months displayed as discrete units in this way doesn't make sense for my brain. It presents time as discontinuous and divided, making it difficult to conceptualize in an intuitive way when events are happening relative to each other. ğŸ§ âš¡

With traditional calendars, I find it difficult to plan ahead as I think about the future as I figure out, say, travel dates for an upcoming trip. âœˆï¸ğŸ—ºï¸

Even calendars that offer the ability to display several months at once still separate dates from one month to the next:

[[file:docs/assets/_img/mc-simple.png]]

Your brain has to do a little mental calculation to grasp that the 31st of one month down at the bottom over here is just one day before the 1st of the next month up there on the right. ğŸ”ğŸ­

It's not like your brain can't figure it out... but it requires a level of abstraction, intellectualizing the concept of time. ğŸ¤¯ğŸ“

It's like a map that's not to scale. Sure, you can mentally compensate... but wouldn't you rather just be able to see at a glance where things are, knowing you can trust your intuitive sense of how far away things are from each other? ğŸ—ºï¸ğŸ¢

** The Solution: A continuous perspective
[[file:docs/assets/_img/unreliablenarrator_infinite_future_with_scrolling_calendar_dat_aab1ab6f-609f-41ad-b18c-af1556b51b19.png]]

What I want is a calendar that accurately depicts the continuous flow of time, displaying the future as what it is: a continuous series of days. ğŸŒŠğŸ•°ï¸

Instead of having to click "Next," like turning the page of a book, I want to be able to just scroll down to see upcoming events. ğŸ“œğŸ¡

Why are calendars designed in this counterintuitive way? Tradition. In the old days, we hung paper calendars on the wall. Wall space, since it's physical space, is limited. Your wall isn't high enough -- and you're not tall enough -- to display 12 months worth of days. ğŸ›ï¸ğŸ“…

But we're not in the 12th century anymore (the name of this app notwithstanding). Google Calendar is not a wall calendar. Just as an e-reader lets you scroll continuously instead of flipping pages, why shouldn't a calendar work the same way? ğŸ“–ğŸ”„

I figured others might feel the same way, so I looked for solutions.

** A Continuous Calendar
Then I stumbled upon [[https://madebyevan.com/calendar/][Continuous Calendar]] by [[https://github.com/evanw][Evan Wallace]]. It was perfect. Exactly what I was looking for: a calendar where I could scroll down and up as I thought about the future and planned my weeks and months. One that displayed time in a visual, intuitive way. ğŸŒŠğŸ—“ï¸

[[file:docs/assets/_img/interface.png]]

* Evan's Original Features
- Infinite scrolling in both directions---past and future. ğŸ”„ğŸ“†
- Click on a day to add an event. âœï¸ğŸ“Œ
- Data stored locally in your browser for privacy. ğŸ”’ğŸ’¾

[[file:docs/assets/_img/scrolly.gif]]

* My Enhancements
#+CAPTION: The *Timeless* interface, now with even more fluidity.

[[file:docs/assets/_img/unreliablenarrator_infinite_calendar_scrolling_calendar._appli_56f4a6e0-a252-4621-8bb6-7443c1c2933c.png]]

I built on Evan's work with several key upgrades:
- Added the option to display days of the week. ğŸ—“ï¸ğŸ“Š
- Added month names for easier navigation. ğŸŒğŸ“†
- Implemented backup/export functionality using JSON. ğŸ”„ğŸ’¾
- Wrote a Python script to convert saved data into an ICS file for import into MacOS Calendar. (Still a work in progress.) ğŸğŸ“…
- *European-style week layout:* Weeks start on *Monday,* because weekends belong together. When I plan *this weekend*, I'm thinking of both Saturday and Sunday, not splitting them up. ğŸ“…ğŸ‡ªğŸ‡º

I'm *not* a coder. ChatGPT Plus made these changes for me. Here's my conversation with it:
[[https://chat.openai.com/share/512d0b31-f773-49a6-8246-2e003f186e6a][See the ChatGPT conversation ğŸ¤–ğŸ“]]

** ğŸ‰ New Functional Enhancements

** ğŸ”„ Smoother Undo
Undoing changes used to require a *full page reload.* Now:
- Undo restores the last saved snapshot *in place*, keeping navigation uninterrupted.
- The calendar re-renders using ~loadCalendarAroundDate(todayDate)~, so your scroll position stays put.
- The result? *Faster, smoother undo.* ğŸï¸ğŸ”™

** âœ¨ Highlight "Clicked" Day
To confirm when you've added a note:
- The clicked day *briefly* flashes with a highlight effect (~.clicked-day~ class).
- The highlight disappears after 500ms, letting you know it worked. ğŸ†ğŸ”

** ğŸ“ Smarter Multi-Line Input
Now you can write longer notes *without friction*:
- *Enter* (no Shift) saves and closes.
- *Shift+Enter* adds a new line for bullet points or longer thoughts.
- Quick notes stay quick. Longer notes stay readable. âœï¸ğŸ“œ

** ğŸ“… Improved Date Picker
The "Jump to Date" field now has a practical range:
~<input type="date" id="jumpDate" min="2000-01-01" max="2050-12-31">~
- Keeps navigation user-friendly while allowing customization. ğŸ¯ğŸ“Œ


** Expanded Mini-Calendar Overview

- *Multi-Month Display:* The mini-calendar now shows the previous, current, and next months in a vertically stacked layout.
- *Clear Month Headers:* Each mini-calendar section includes a header indicating the month and year.
- *Quick Navigation:* Clicking on any day in these mini-calendars instantly navigates you to that date in the main calendar.

** Enhanced Keyboard Navigation

- *Arrow Key Precision:* Left and right arrow keys now move day by day---crossing week boundaries seamlessly without skipping any dates.
- *Enter Key for New Entries:* Pressing Enter on the currently highlighted day creates a new note.
- *Delete Key Functionality:* Pressing Delete while a day is highlighted deletes all entries for that day (with a confirmation prompt), making it easy to manage entries using just the keyboard.
- *Escape Key in Textareas:* When editing a note, pressing Escape cancels the editing session (by blurring the field).

** Improved Mouse Interaction

- *Single-Click Entry Creation:* Clicking on any empty space within a day cell creates a new note.
- *Single-Click to Edit:* Clicking on an existing note focuses the textarea for editing.
- *Restored Classic Behavior:* These changes restore the familiar mouse-based interactions alongside the new keyboard shortcuts.

** Refined Visual and UI Effects

- *Timeless Button Redesign:* The "Timeless" button has been updated with a modern gradient, increased padding, rounded corners, and smooth hover/active effects.
- *Smooth Animations & Transitions:*
 - Calendar cells now have refined hover effects with a slight scale-up and deeper shadow.
 - A subtle ripple effect provides immediate feedback when a cell is clicked.
 - The overall scrolling animations have been smoothed out for a more polished experience.
- *Glassmorphism for Notes:* Note textareas now use a semi-transparent background with a blur filter to create a modern frosted-glass look.
- *Animated Dot Grid Background:* The dot grid background has a slow, subtle movement to add depth without distraction.

** Undo/Redo Functionality

- *Undo Support:* Use Ctrl+Z (or plain "z") to undo the last change.
- *Redo Support:* Use Ctrl+Shift+Z or Ctrl+Y to redo the last undone change.
- *Enhanced Editing Control:* These features offer better control during extensive note editing and calendar updates.

** Additional Enhancements
- *Mouse & Keyboard Harmony:* Both mouse interactions and keyboard shortcuts work together seamlessly for adding, editing, and navigating calendar entries.
- *Infinite Scroll & Responsive Design:* The calendar supports infinite scrolling and adapts smoothly across different devices.

* Visual & UI Enhancements
In this release, Timeless not only remains a continuous calendar but also becomes a feast for the eyes and smoother to interact with. The following upgrades have been implemented:

** Modern Pastel Palette & Refined Typography
- *Fresh Color Scheme:* The CSS variables have been updated to use a modern pastel/duotone palette for a soft, elegant look.
- *Typography Upgrade:* Month headings now use *Playfair Display* for a bold, sophisticated appearance, while day numbers are styled with *Fira Code* to create a clear, monospaced contrast.

** Smooth Hover & Focus Effects
- *Custom Transitions:* Buttons and day cells now use custom cubic-bezier transitions, resulting in fluid, natural animations.
- *Soft Glow on Hover:* A subtle glow effect (using the accent color) is applied when hovering over day cells, enhancing interactivity.

** Refined Ripple Animation
- *Enhanced Feedback:* The ripple effect on cell clicks has been refined with a longer duration and smoother fade-out, providing immediate and polished visual feedback.

** Layout & Structural Tweaks
- *Parallax Overlay:* A semi-transparent overlay with a blend mode has been added to the parallax background for a "liquid" look that deepens the visual experience.
- *Sticky Header Dynamics:* The header now starts transparent and transitions to a solid background with a drop shadow when scrolling beyond 50 pixels, ensuring it stays legible and prominent.

** Expanded Header with Increased Whitespace
- *Larger Header:* The top month and year header has been enlarged, featuring a bigger font size and extra vertical padding.
- *Improved Readability:* Additional whitespace above and below the header creates a more spacious, visually appealing layout that immediately draws attention to the current period.

* New enhancements
What You've Enhanced & Suggestions for Further Improvements
 1. New Color & Semantic Palette:
- You've defined a set of semantic colors (primary, secondary, success, info, warning, danger) and then tied your core variables (e.g. --bg-primary, --accent) to them. This makes the theme more intentional and flexible.
- Suggestion: You might consider standardizing names (e.g. using either "accent" or "color-primary" consistently) to avoid redundancy.
 2. Custom Scrollbar Styling:
- The new scrollbar rules give a subtle, modern look.
- Suggestion: Test in various browsers to ensure the effect works well on non-WebKit browsers.
 3. Enhanced Mini-Calendar:
- Your new mini-calendar styling adds extra padding, a frosted (blurred) background, rounded corners, and a soft box-shadow---making it visually distinct and modern.
- Suggestion: If you want to revert these changes (see next section), you can restore the original minimal styling.
 4. Sticky Header Improvements:
- Increasing the opacity (from 80% to 95%) and using a solid background for the sticky header greatly improves legibility.
- The larger font and extra vertical padding for the month heading also add clarity and elegance.
 5. Dynamic Animations & Effects:
- You've refined the hover effects for calendar cells (with perspective transforms, subtle shadows, and a "shine" effect on month boundaries).
- The updated "today" pulse animation with custom keyframes makes the current day stand out without being overwhelming.
 6. Enhanced Help Overlay:
- The help overlay now has increased dimensions, extra padding, rounded corners, and a backdrop blur---making it easier to read and more visually appealing.
 7. Additional UI Touches:
- Animated button icons and a refined loading spinner contribute to a modern, polished feel.
- Adding tag detection (processing hashtags in notes) is a clever usability and visual enhancement.
 8. Keyboard Navigation Mode:
- The new keyboard navigation mode---toggled via the "i" key, with "q" (or Escape) to exit---provides a clear, dedicated mode for day-by-day navigation.
- The visual indication (via a body outline) and toast messages make the mode change clear to users.

** Export as Markdown Diary

The Markdown Diary export (~Cmd/Ctrl+E~) lets you export your entire timeline as a human-readable Markdown file named ~timeline.md~:

- *One-Click Export:* Press ~Cmd+E~ (Mac) or ~Ctrl+E~ (Windows/Linux) to download your complete timeline
- *Clipboard Copy:* The export automatically copies to your clipboard for easy pasting
- *Chronological Format:* Events are organized by date in descending order (newest first)
- *Clean Markdown:* Each date appears as a heading with events listed below
- *Dropbox Integration:* The same ~timeline.md~ format is used for background syncing to Dropbox

The Markdown export provides a portable, version-control-friendly backup of your entire timeline that can be read in any text editor or imported back into Timeless.

* Recent Updates (October 2025)

** UI/UX Enhancements
- Restored rounded card design for day cells with 14px border radius
- Implemented refined event/note cards with gradient backgrounds and layered shadows
- Enhanced today cell highlighting with customizable red gradient (#D43E44)
- Added letter-spacing to month/weekday labels for more polished typography
- Improved text contrast for better readability

** Keyboard Navigation
- Fixed month navigation with n/p keys using proper viewport detection
- Added N/P shortcuts for year navigation (12-month jumps)
- Changed "Add Note to Today" shortcut from n to c/T
- Improved navigation detection using getBoundingClientRect()

** Layout Improvements
- Expanded desktop canvas to 1680px and re-centered the main grid
- Converted the weekly grid to a seamless, gutter-free layout with shared borders
- Softened note styling with lighter typography and more generous padding
- Updated mobile action bar to center the Today button between month controls
- Refined mobile month headers so the accent bar no longer overlaps the label

** Bug Fixes
- Fixed today cell not showing red highlighting (CSS specificity issue)
- Resolved help overlay animation wiggling/reordering
- Fixed keyboard navigation always jumping to wrong months
- Resolved mini calendar disappearing when scrolling to today
- Fixed calendar cutoff issues on right edge
- Corrected dark mode contrast problems
- Removed conflicting overflow settings
- Eliminated the inline delete iconâ€”clearing a note now removes it automatically

* Getting Started
** Non-expert users
Simply visit: [[https://timeless-calendar.vercel.app/][Timeless: The Infinitely Scrolling Calendar ğŸŒğŸš€]]

Start adding events immediately!

** Developers

*** Installation
#+BEGIN_SRC sh
git clone https://github.com/incandescentman/timeless.git
cd timeless
npm install
npm run dev
#+END_SRC

*** Building
#+BEGIN_SRC sh
npm run build
npm run preview
#+END_SRC

* Technical Details

** Tech Stack

*** Frontend
- *React 18* with hooks and TypeScript for type safety
- *Vite* for build tooling and hot module replacement
- *CSS3* with CSS variables for theming
- *date-fns* for date manipulation
- *@tabler/icons-react* for consistent iconography
- *kbar* for command palette
- *react-hot-toast* for notifications

*** Backend & Sync
- *Vercel Serverless Functions* for API endpoints
- *Dropbox API* for cloud storage and cross-device sync
  - ~/api/calendar-load.js~ - Downloads and parses ~timeline.md~ from Dropbox
  - ~/api/calendar-save.js~ - Uploads calendar data to Dropbox
  - ~/api/calendar.js~ - Unified GET/POST handler
- *Timestamp reconciliation* - Compares local vs. server timestamps to preserve newest data
- *Health checks* - ~npm run health~ validates sync integrity

*** Performance
- *Virtualization* - Desktop and mobile views render only visible date ranges for smooth scrolling across thousands of days
- *LocalStorage* - Immediate persistence with background Dropbox sync
- Different virtualization strategies: desktop renders week-by-week, mobile renders day-by-day for optimal touch interaction

** Layout Specifications

*** Desktop (>768px)
- *Fixed Sidebar:* 240px mini calendar with navigation controls (fixed position)
- *Main Calendar:* Seamless seven-column grid with shared borders
  - Total UI width: 1680px (sidebar + calendar)
  - Calendar content: ~1240px, centered within the viewport
  - Shared borders create a flush layoutâ€”no gutters between days
- *Auto-centering:* Entire UI block centers on large displays (>1760px width)

*** Mobile (â‰¤768px)
- *No Sidebar:* Mini calendar hidden for maximum content space
- *Full Width:* Calendar uses entire viewport width with card-style days
- *One Day Per Row:* Vertical stacking for easy reading with soft dividers
- *Balanced Header:* Month name/year stack with accent stripe aligned to the left
- *Action Bar:* Bottom controls order ~Prev â€¢ Today â€¢ Next â€¢ Menu~, with Today anchored center
- *Tap Targets:* Larger controls (â‰¥80px height) and swipe gestures for note management

** Browser Support
- Chrome/Edge 90+
- Firefox 88+
- Safari 14+

* Keyboard Shortcuts

** Navigation
- ~âŒ˜K~ or ~/~ - Command palette
- ~t~ - Jump to today
- ~y~ - Year view
- ~p~ / ~n~ - Previous/next month
- ~P~ / ~N~ - Previous/next year
- ~i~ - Enter navigation mode
- ~?~ - Help overlay

** Editing
- ~c~ or ~T~ - Add note to today
- ~m~ - Multi-select mode
- ~Tab~ / ~â‡§Tab~ - Save & move between notes
- ~Return~ - Save & exit
- ~âŒ˜Z~ / ~âŒ˜Y~ - Undo/redo
- ~Backspace~ - Delete day's notes

** System
- ~âŒ˜D~ - Toggle dark mode
- ~âŒ˜E~ / ~Ctrl+E~ - Export markdown
- ~Esc~ - Close overlays

* Data Storage

Timeless uses a dual-layer persistence model combining immediate local storage with background cloud sync:

** Local Persistence
- *LocalStorage:* All changes persist immediately to browser ~localStorage~ for instant availability
- *Normalized format:* Events stored as JSON arrays keyed by date (~YYYY_MM_DD~)
- *Legacy cleanup:* Old ~itemN~ token references and ISO-format keys are automatically migrated

** Cloud Sync (Dropbox)
- *Background sync:* Changes sync to ~/Apps/Timeless/calendar/timeline.md~ in your Dropbox
- *Timestamp reconciliation:* On load, compares ~lastSavedTimestamp~ between local and server, preserves newest data
- *Markdown format:* Uses human-readable Markdown for version control and easy inspection
- *Conflict resolution:* Server timestamps (~server_modified~) and embedded ~lastSavedTimestamp~ ensure consistency

** Export & Import
- *Markdown diary:* Press ~Cmd/Ctrl+E~ to export as ~timeline.md~ (same format as Dropbox sync)
- *JSON backup:* Export complete calendar as JSON for manual backups
- *Import from JSON:* Restore or migrate data from JSON backup files
- *Health checks:* Run ~npm run health~ to validate sync integrity and detect timestamp mismatches

* Customization

The React/Vite architecture makes customization straightforward:

** Visual Styling
- *Theme variables:* Edit ~src/styles/index.css~ to adjust colors, spacing, and typography via CSS custom properties
- *Component styles:* Individual component styles live alongside their React components in ~src/components/~
- *Dark mode:* Theme switching logic in ~src/App.tsx~ toggles between light/dark CSS variable sets

** Functionality
- *Main app:* ~src/App.tsx~ - Core application logic, state management, and event handling
- *Calendar components:* ~src/components/Calendar.tsx~, ~DayCell.tsx~, ~EventCard.tsx~, etc.
- *Date utilities:* ~src/utils/dateUtils.ts~ - Date manipulation and formatting helpers
- *Storage layer:* ~src/utils/storage.js~ - LocalStorage and Dropbox sync logic
- *Type definitions:* ~src/types/index.ts~ - TypeScript interfaces for events and calendar data ğŸ¨ğŸ”§

* Contributing
All contributions welcome---I need all the help I can get. Fork the repo, make your changes, and submit a pull request. I look forward to seeing what you come up with! ğŸš€ğŸ’¡

* License
Timeless is released under the MIT License. See the LICENSE file for details. ğŸ“œâš–ï¸
