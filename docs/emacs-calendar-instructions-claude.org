#+TITLE: Emacs Calendar & Diary Usage Guide
#+DATE: 2025-10-14
#+AUTHOR: Claude

* Overview
This guide covers how to use Emacs Calendar with the custom diary integration configured in Jay's Emacs setup.

* Opening the Calendar

** Commands
- =M-x calendar= - Open the calendar
- =M-x diary= - View diary entries

* Basic Navigation

** Moving Around
| Key       | Action                          |
|-----------+---------------------------------|
| =.=       | Go to today's date              |
| =t=       | **Custom:** Jump to today + open diary entry |
| =>=       | Scroll calendar forward (next month) |
| =<=       | Scroll calendar backward (previous month) |
| =C-f=     | Move forward one day            |
| =C-b=     | Move backward one day           |
| =C-n=     | Move down one week              |
| =C-p=     | Move up one week                |
| =M-}=     | Forward one month               |
| =M-{=     | Backward one month              |
| =C-x ]=   | Forward one year                |
| =C-x [=   | Backward one year               |

** Jumping to Specific Dates
| Key     | Action                          |
|---------+---------------------------------|
| =g d=   | Go to specific date (prompts for date) |
| =g c=   | Go to ISO calendar date         |
| =g w=   | Go to week number               |
| =o=     | **Custom:** Jump to diary entry for date under cursor |

* Diary Integration

** Custom Configuration
- Diary file: =/Users/jay/Dropbox/github/timeless/jay-diary.md=
- Comment syntax: =#= ... (no closing delimiter)
- Week starts: Monday
- Format: Entries are expected in =M/D/YYYY= format

** Viewing Diary Entries
| Key     | Action                          |
|---------+---------------------------------|
| =RET=   | **Custom:** Show diary entries for selected date |
| =d=     | Display all diary entries for selected date |
| =s=     | Show diary entries for entire week |
| =m=     | Mark diary entry days in calendar |
| =u=     | Unmark diary entry days         |

** Custom Functions

*** =my-calendar-jump-to-diary-entry= (bound to =o=)
Opens the diary markdown file and searches for the date under cursor.

*Behavior:*
1. Extracts date from calendar cursor position
2. Formats as =M/D/YYYY= (e.g., "10/14/2025")
3. Opens diary file in other window
4. Searches for that date string
5. Positions cursor at beginning of entry line
6. Returns focus to calendar window
7. Shows warning if date not found: "ðŸŸ¡ Could not find entry for M/D/YYYY"

*** Custom =t= binding
Enhanced "go to today" that also opens today's diary entry.

*Behavior:*
1. Jumps calendar to today's date
2. Automatically runs =my-calendar-jump-to-diary-entry=
3. Opens and positions in today's diary entry

* Standard Diary Entry Creation

** From Calendar
| Key     | Action                          |
|---------+---------------------------------|
| =i d=   | Insert diary entry for selected day |
| =i w=   | Insert weekly diary entry       |
| =i m=   | Insert monthly diary entry      |
| =i y=   | Insert yearly diary entry       |
| =i a=   | Insert anniversary diary entry  |
| =i b=   | Insert block diary entry        |
| =i c=   | Insert cyclic diary entry       |

* Holidays and Special Days

| Key     | Action                          |
|---------+---------------------------------|
| =h=     | Show holidays for cursor month  |
| =x=     | Mark holidays in calendar       |
| =u=     | Unmark holidays                 |
| =a=     | Show holidays for entire year   |

*Note:* Holiday highlighting is disabled in your config via =calendar-mark-holidays-flag nil=

* Lunar Phases & Astronomical Data

| Key     | Action                          |
|---------+---------------------------------|
| =M=     | Show lunar phases for month     |
| =S=     | Show sunrise/sunset times       |

* Other Useful Commands

** Calendar Display
| Key     | Action                          |
|---------+---------------------------------|
| =q=     | Quit calendar (bury buffer)     |
| =?=     | Show calendar help              |
| =C-h m= | Show calendar mode help         |

** Marking and Highlighting
| Key     | Action                          |
|---------+---------------------------------|
| =SPC=   | Scroll other window down        |
| =DEL=   | Scroll other window up          |

* Workflow Examples

** Daily Review Workflow
1. =M-x calendar= - Open calendar
2. =t= - Jump to today and open today's diary entry
3. Review/edit entry in diary window
4. =C-x o= - Switch back to calendar if needed
5. Navigate to other dates with arrow keys
6. =o= - Open diary entries for specific past/future dates

** Weekly Planning Workflow
1. =M-x calendar= - Open calendar
2. =.= - Go to today
3. =C-n= - Move down to next week
4. =o= - Check diary entries for each day
5. Navigate with =C-f/C-b= through the week
6. Use =o= to jump to diary file and add entries

** Finding a Specific Date
1. =M-x calendar= - Open calendar
2. =g d= - Jump to date (enter date when prompted)
3. =o= - Open diary entry for that date
4. Edit entry as needed

* Diary File Format

Your diary uses Markdown format (=jay-diary.md=) with these conventions:

** Date Format
Entries should be formatted as: =M/D/YYYY=

Example:
#+begin_example
# 10/14/2025
Had a great day working on Emacs configuration.

# 10/15/2025
Meeting with team at 2pm.
#+end_example

** Comments
Lines starting with =#= can be used as comments (configured via =diary-comment-start=).

* Tips and Tricks

1. **Quick Today Access:** Press =t= to instantly jump to today's diary entry
2. **Calendar as Journal Navigator:** Keep calendar open in a split window while editing diary
3. **Date Discovery:** Use calendar to find day-of-week for any date, then press =o= to create/view entry
4. **Month Overview:** Press =RET= to see all diary entries for a date in the diary display buffer
5. **Focus Management:** Custom functions preserve window focus by returning to calendar window

* Configuration Reference

Your calendar is configured with:
- Week starts on Monday (=calendar-week-start-day 1=)
- Holidays not highlighted (=calendar-mark-holidays-flag nil=)
- Diary entries marked in calendar (=calendar-mark-diary-entries-flag t=)
- Diary shown on calendar open (=calendar-view-diary-initially-flag t=)
- Fancy diary display (=diary-display-function 'diary-fancy-display=)

* Troubleshooting

** "Could not find entry for date"
If =o= shows this message, the date string doesn't exist in your diary file. The search looks for exact =M/D/YYYY= format.

**Solution:** Manually add the date to your diary file in the expected format.

** Diary not showing entries
Check that:
1. =diary-file= points to correct file: =/Users/jay/Dropbox/github/timeless/jay-diary.md=
2. Dates in diary file use =M/D/YYYY= format
3. File is accessible and not locked

** Calendar keybindings not working
Ensure =calendar-mode-map= customizations are loaded:
- Check that =(with-eval-after-load 'calendar ...)= has been evaluated
- Restart Emacs if needed

* Related Resources

- =C-h m= in calendar-mode for full list of standard bindings
- =M-x describe-function RET calendar= for calendar documentation
- =M-x describe-function RET diary= for diary documentation
- [[info:emacs#Calendar/Diary][Emacs Manual: Calendar/Diary]]
