# Changelog

All notable changes to Timeless calendar are documented in this file.

## [Unreleased]

### Added - 2025-10-14
- Dropbox-backed calendar sync flow:
  - Markdown diary helpers for JSONâ†”Markdown conversion with embedded timestamps
  - Vite dev middleware endpoints (`/__load-calendar-diary`, `/__update-calendar-diary`) writing to the Dropbox symlink
  - Dropbox API handlers (`api/calendar-load`, `api/calendar-save`) with shared token cache
- Documentation updates covering Dropbox env vars, dev defaults, and deployment steps

### Changed - 2025-10-14
- `/api/calendar` now delegates to the Dropbox handlers; removed Redis dependency (`ioredis`)
- `src/utils/storage` defaults dev sync/load endpoints to the middleware and respects the new env overrides
- Verified production flow: web captures write through to `data/jay-diary.md` in Dropbox; manual diary edits automatically refresh once Dropbox metadata changes are detected (no manual timestamp bump needed).

### Added - 2025-10-04
- Local iOS app icon and favicon generated from timeless-etched.png
  - 180x180 apple-touch-icon.png for iOS home screen
  - 32x32 favicon.png for browser tabs
  - Replaced remote icon URLs with local /public assets
- Enhanced terminator HUD now default (promoted from experimental mode)
  - Corner brackets with cyan accents at all 8 corners
  - Chromatic aberration on title text (RGB split effect)
  - Edge glow pulse animation sweeping across HUD
  - Animated data stream background with scrolling hex codes
  - Static/noise texture overlay for CRT monitor effect
  - Hexagonal accent shapes on meta and telemetry sections
  - Real-time data: current date, time, and today's event count
- ESC key immediately dismisses command HUD
- Bottom sheet composer for mobile (swipe-to-dismiss)
- Touch ripple effects on mobile day cells (Material Design style)
- Loading skeleton UI with shimmer animation
- Smooth scrolling with momentum on mobile

### Changed - 2025-10-04
- Larger touch targets on mobile (220px minimum height for day cells)
- Removed gaps between days within week rows on mobile (flush layout)
- HUD hidden on mobile for optimal mobile UX
- All animations optimized to use only transform/opacity for 60fps
- Reduced shadow complexity on mobile for better performance

### Fixed - 2025-10-04
- CRITICAL: Mobile crash caused by rendering hundreds of BottomSheet portals
  - Changed to only render BottomSheet when isAddingNew is true on mobile
  - Reduced from 100+ portal instances to 0-1 at any time
- Vim navigation keys (h/j/k/l) no longer hijack browser shortcuts (Cmd+L now works)
  - Added modifier key checks (!e.metaKey && !e.ctrlKey)

### Added - 2025-10-02
- Integrated experimental-mode package for UI variant testing
- Added ExperimentalModeWrapper component for testing design variants
- Configured to use published `@jaydixit/experimental-mode@^1.0.0` from npm

### Fixed - 2025-10-02
- Fixed import path for `parseInstructionString` from `@jaydixit/experimental-mode` (not `/components`)
- Removed duplicate keyboard handler for Option-X (package handles it automatically)
- Fixed CSS specificity issues with global button styles overriding experimental-mode navigation
- Increased z-index to 9999 for variant switcher visibility

### Notes
- Experimental mode only activates with `?experimental=true` URL parameter
- Should be removed before final production deployment
